<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>ü©∏ ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶®</title>
<style>
body{font-family:kalpurush,sans-serif;background:#fefefe;margin:0;padding:20px;text-align:center;}
input,select,button{width:90%;padding:10px;margin:5px 0;border:1px solid #ccc;border-radius:8px;}
button{background:#c62828;color:#fff;font-size:16px;cursor:pointer;border:none;}
button:hover{background:#b71c1c;}
.formBox{max-width:400px;margin:auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.1);}
#msg{font-weight:bold;margin-top:10px;}
</style>
</head>
<body>

<h2>ü©∏ ‡¶®‡¶§‡ßÅ‡¶® ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶®</h2>
<div class="formBox">
  <input id="name" placeholder="‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"><br>
  <select id="blood">
    <option value="">‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™</option>
    <option>A+</option><option>A-</option><option>B+</option><option>B-</option>
    <option>O+</option><option>O-</option><option>AB+</option><option>AB-</option>
  </select><br>
  <input id="phone" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞"><br>
  <input id="address" placeholder="‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ"><br>
  <input id="lastDonate" type="date"><br>
  <input id="photo" type="file" accept="image/*"><br>
  <button onclick="submitForm()">‚úÖ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</button>
  <p id="msg"></p>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxASOpyvgfgXgOzpqkhsKJe1Ybh1_BRA31LO3030StDIItfnbEFv_ZaXM5DvG82DSY/exec"; // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ Apps Script URL ‡¶¨‡¶∏‡¶æ‡¶ì

async function submitForm(){
  const name = document.getElementById("name").value.trim();
  const blood = document.getElementById("blood").value;
  const phone = document.getElementById("phone").value.trim();
  const address = document.getElementById("address").value.trim();
  const lastDonate = document.getElementById("lastDonate").value;
  const photoFile = document.getElementById("photo").files[0];

  if(!name || !blood || !phone){ alert("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®"); return; }

  let base64Photo = "";
  if(photoFile) base64Photo = await fileToBase64(photoFile);

  document.getElementById("msg").innerText = "‚è≥ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá...";

  try{
    const res = await fetch(API_URL,{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({
        name,blood,phone,address,lastDonate,photoURL:base64Photo
      })
    });
    const data = await res.json();
    if(data.status==="success"){
      document.getElementById("msg").innerText = "‚úÖ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!";
      document.querySelector(".formBox").reset;
    }else{
      document.getElementById("msg").innerText = "‚ö†Ô∏è ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: "+data.message;
    }
  }catch(err){
    document.getElementById("msg").innerText = "‚ö†Ô∏è ‡¶®‡ßá‡¶ü‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶ï ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø!";
  }
}

function fileToBase64(file){
  return new Promise((resolve,reject)=>{
    const reader=new FileReader();
    reader.onload=()=>resolve(reader.result);
    reader.onerror=e=>reject(e);
    reader.readAsDataURL(file);
  });
}
</script>
</body>
</html>
